{
    "data":{
        "user":{
            "january":{
                "weak1":92,
                "weak2":78,
                "weak3":90,
                "weak4":56
            },
            "fabuary":{
                "weak1":92,
                "weak2":43,
                "weak3":33,
                "weak4":56
            },
            "march":{
                "weak1":56,
                "weak2":65,
                "weak3":88,
                "weak4":56
            },
            "april":{
                "weak1":34,
                "weak2":90,
                "weak3":77,
                "weak4":56
            },
            "may":{
                "weak1":33,
                "weak2":45,
                "weak3":98,
                "weak4":56
            },
            "june":{
                "weak1":77,
                "weak2":43,
                "weak3":54,
                "weak4":45
            }

        },
        "guest":{
            "january":{
                "weak1":45,
                "weak2":34,
                "weak3":89,
                "weak4":67
            },
            "fabuary":{
                "weak1":56,
                "weak2":79,
                "weak3":56,
                "weak4":34
            },
            "march":{
                "weak1":78,
                "weak2":23,
                "weak3":90,
                "weak4":56
            },
            "april":{
                "weak1":45,
                "weak2":78,
                "weak3":76,
                "weak4":90
            },
            "may":{
                "weak1":54,
                "weak2":88,
                "weak3":90,
                "weak4":56
            },
            "june":{
                "weak1":88,
                "weak2":58,
                "weak3":67,
                "weak4":34
            }

        },
        "products":{
            "basic_tees":55,
            "custom_short_pants":31,
            "super_hoodies":14
        }
    }
}



import Boxes from "./components/dashboard/boxes";
import Cards from "./components/dashboard/cards";
import Header from "./components/dashboard/header";
import Menubar from "./components/dashboard/menubar";
import styles from "./dashboard.module.css";
import Graph from "./components/dashboard/graph";
import clientPromise from "../lib/mongodb";
import s from './components/dashboard/dash.module.css'
import React, { useState, useEffect } from "react";
import { Line } from "react-chartjs-2";
import {
  Chart as ChartJS,
  Title,
  Tooltip,
  LineElement,
  Legend,
  CategoryScale,
  LinearScale,
  PointElement,
} from "chart.js";
ChartJS.register(
  Title,
  Tooltip,
  LineElement,
  Legend,
  CategoryScale,
  LinearScale,
  PointElement
);
export default function Dashboard({dashboard}) {
  console.log(dashboard)
  const Data = dashboard[0].data;
    const arr1 = [10,20,30,40];
    const arr2 = [40,30,20,10];
    const [data, setdata] = useState({
      labels: dashboard[0].label,
      datasets: [
        {
          label: "User",
          data: arr1,
          tension: 0.4,
          pointRadius: 0,
          borderColor: "#9BDD7C", // color of lines first user
          borderWidth: 2,
        },
        {
          label: "Guest",
          data: arr2,
          tension: 0.4,
          pointRadius: 0,
          borderColor: "#E9A0A0", // color of lines second guest
          borderWidth: 2,
        },
      ],
    });
    const options = {
      maintainAspectRatio: false,
      responsive: true,
      legend: {
        display: false,
      },
      plugins: {
        legend: {
          labels: {
            usePointStyle: true,
            font: {
              size: 16,
              weight: "bold",
              family: "Arial",
            },
            color: "#333",
            pointStyle: "circle",
            pointRadius: 2,
          },
          // other options for the legend here
        },
      },
      scales: {
        x: {
          grid: {
            display: false,
          },
        },
        y: {
          beginAtZero: true,
          ticks: {
            stepSize: 30,
            maxTicksLimit: 5, // maximum number of ticks to display
          },
        },
      },
    };
  return (
    <>
      <div className={styles.container}>
        <div className={styles.menubar}>
          <Menubar></Menubar>
        </div>
        <div className={styles.leftBox}>
          <div>
            <Header></Header>
            <Cards></Cards>
            <div className={s.graph_con}>
        <div className="graph-p">Activities</div>
        <div>
          <div style={{ position: "relative" }}>
            <select
              style={{
                position: "absolute",
                border: "none",
                outline: "none",
              }}
              onChange={(event) => {
                const val = event.target.value;
                const v = Data.user[val];
                const v1 = Data.guest[val];
                setdata((prev) => {
                  return {
                    ...prev,
                    datasets: [
                      { ...prev.datasets[0], data: v },
                      { ...prev.datasets[1], data: v1 },
                    ],
                  };
                });
              }}
            >
              <option style={{ border: "none" }} value="january">
                January{" "}
              </option>
              <option style={{ border: "none" }} value="fabuary">
                {" "}
                Febuary
              </option>
              <option style={{ border: "none" }} value="march">
                {" "}
                March
              </option>
              <option style={{ border: "none" }} value="april">
                April{" "}
              </option>
              <option style={{ border: "none" }} value="may">
                May{" "}
              </option>
              <option style={{ border: "none" }} value="june">
                {" "}
                June
              </option>
            </select>
          </div>
          <div>
            <Line
              style={{ height: "200px", width: "97%" }}
              className="graph-base"
              data={data}
              options={options}
            />
          </div>
        </div>
      </div>
            {/* <Graph> </Graph> */}
            {/* <Top></Top> */}
            <Boxes></Boxes>
          </div>
        </div>
      </div>
    </>
  );
}
export async function getServerSideProps() {
  try {
    const client = await clientPromise;
    const db = client.db("bookings");

    const teachers = await db.collection("dashboard").find({}).toArray();

    return {
      props: { dashboard: JSON.parse(JSON.stringify(teachers)) },
    };
  } catch (e) {
    console.error(e);
  }
}



{
    label: ["Weeks1", "Weeks2", "Weeks3", "Weeks4"],
    data: {
      user: {
        january: [92, 78, 90, 56],
        fabuary: [92, 43, 33, 56],
        march: [56, 65, 88, 56],
        april: [34, 90, 77, 56],
        may: [33, 45, 98, 56],
        june: [77, 43, 54, 45],
      },
      guest: {
        january: [45, 34, 89, 67],
        fabuary: [56, 79, 56, 34],
        march: [78, 23, 90, 56],
        april: [45, 78, 76, 90],
        may: [54, 88, 90, 56],
        june: [88, 58, 67, 34],
      },
      products: {
        basic_tees: 55,
        custom_short_pants: 31,
        super_hoodies: 14,
      },
    },
  }